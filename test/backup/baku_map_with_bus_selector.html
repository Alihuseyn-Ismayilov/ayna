<!DOCTYPE html>
<html>
<head>
    <title>Baku Map - Bus Routes & Stops</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; }
        #container { display: flex; height: 100vh; }

        #sidebar {
            width: 400px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            overflow-y: auto;
            box-shadow: 4px 0 15px rgba(0,0,0,0.3);
        }

        .header {
            padding: 25px;
            background: rgba(0,0,0,0.3);
            border-bottom: 2px solid rgba(255,255,255,0.2);
        }

        .header h1 { font-size: 24px; margin-bottom: 8px; }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            padding: 20px;
            background: rgba(0,0,0,0.2);
        }

        .stat-card {
            background: rgba(255,255,255,0.15);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number { font-size: 24px; font-weight: bold; }
        .stat-label { font-size: 11px; opacity: 0.8; margin-top: 5px; }

        .section {
            padding: 20px;
            background: rgba(0,0,0,0.15);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .section h3 { font-size: 16px; margin-bottom: 12px; }

        .layer-toggle {
            background: rgba(255,255,255,0.1);
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .layer-toggle:hover { background: rgba(255,255,255,0.2); }
        .layer-toggle input { width: 18px; height: 18px; cursor: pointer; }

        .bus-route-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .bus-route-item {
            background: rgba(255,255,255,0.1);
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s;
            border-left: 4px solid #2196F3;
        }

        .bus-route-item:hover {
            background: rgba(255,255,255,0.2);
            transform: translateX(5px);
        }

        .bus-route-item.selected {
            background: rgba(255,255,255,0.3);
            border-left-color: #FFC107;
        }

        .bus-number {
            background: rgba(255,255,255,0.3);
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 16px;
            min-width: 40px;
            text-align: center;
        }

        .bus-name {
            flex: 1;
            font-size: 14px;
        }

        .search-box {
            padding: 15px 20px;
            background: rgba(0,0,0,0.15);
        }

        .search-box input {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
        }

        #map { flex: 1; }

        #selectedBusInfo {
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 1000;
            display: none;
        }

        #selectedBusInfo.show { display: block; }

        #selectedBusInfo h4 { margin: 0 0 5px 0; color: #333; }
        #selectedBusInfo p { margin: 0; color: #666; font-size: 13px; }
        #selectedBusInfo button {
            margin-top: 10px;
            padding: 6px 12px;
            background: #f44336;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="sidebar">
            <div class="header">
                <h1>üöå Baku Bus Routes</h1>
                <p>Select a route to view stops</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">73</div>
                    <div class="stat-label">üìç POIs</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">209</div>
                    <div class="stat-label">üöå Bus Routes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">0</div>
                    <div class="stat-label">üöè Bus Stops</div>
                </div>
            </div>

            <div class="section">
                <h3>üîß Map Layers</h3>
                <label class="layer-toggle">
                    <input type="checkbox" id="togglePOI" checked>
                    <span>üìç Show POI Locations</span>
                </label>
                <label class="layer-toggle">
                    <input type="checkbox" id="toggleStops" checked>
                    <span>üöè Show Bus Stops</span>
                </label>
            </div>

            <div class="search-box">
                <input type="text" id="searchBus" placeholder="üîç Search bus routes..." />
            </div>

            <div class="section">
                <h3>üöå Select Bus Route (209 routes)</h3>
                <div class="bus-route-list" id="busRouteList">
                    <div class="bus-route-item" onclick="selectBusRoute(1, '1')"><div class="bus-number">1</div><div class="bus-name">1</div></div><div class="bus-route-item" onclick="selectBusRoute(2, '2')"><div class="bus-number">2</div><div class="bus-name">2</div></div><div class="bus-route-item" onclick="selectBusRoute(3, '3')"><div class="bus-number">3</div><div class="bus-name">3</div></div><div class="bus-route-item" onclick="selectBusRoute(4, '4')"><div class="bus-number">4</div><div class="bus-name">4</div></div><div class="bus-route-item" onclick="selectBusRoute(5, '5')"><div class="bus-number">5</div><div class="bus-name">5</div></div><div class="bus-route-item" onclick="selectBusRoute(6, '6')"><div class="bus-number">6</div><div class="bus-name">6</div></div><div class="bus-route-item" onclick="selectBusRoute(7, '9')"><div class="bus-number">7</div><div class="bus-name">9</div></div><div class="bus-route-item" onclick="selectBusRoute(8, '10')"><div class="bus-number">8</div><div class="bus-name">10</div></div><div class="bus-route-item" onclick="selectBusRoute(9, '11')"><div class="bus-number">9</div><div class="bus-name">11</div></div><div class="bus-route-item" onclick="selectBusRoute(10, '12')"><div class="bus-number">10</div><div class="bus-name">12</div></div><div class="bus-route-item" onclick="selectBusRoute(11, '13')"><div class="bus-number">11</div><div class="bus-name">13</div></div><div class="bus-route-item" onclick="selectBusRoute(12, '14')"><div class="bus-number">12</div><div class="bus-name">14</div></div><div class="bus-route-item" onclick="selectBusRoute(13, '15')"><div class="bus-number">13</div><div class="bus-name">15</div></div><div class="bus-route-item" onclick="selectBusRoute(14, '17')"><div class="bus-number">14</div><div class="bus-name">17</div></div><div class="bus-route-item" onclick="selectBusRoute(15, '18')"><div class="bus-number">15</div><div class="bus-name">18</div></div><div class="bus-route-item" onclick="selectBusRoute(16, '20')"><div class="bus-number">16</div><div class="bus-name">20</div></div><div class="bus-route-item" onclick="selectBusRoute(17, '21')"><div class="bus-number">17</div><div class="bus-name">21</div></div><div class="bus-route-item" onclick="selectBusRoute(18, '22')"><div class="bus-number">18</div><div class="bus-name">22</div></div><div class="bus-route-item" onclick="selectBusRoute(19, '24')"><div class="bus-number">19</div><div class="bus-name">24</div></div><div class="bus-route-item" onclick="selectBusRoute(20, '26')"><div class="bus-number">20</div><div class="bus-name">26</div></div><div class="bus-route-item" onclick="selectBusRoute(21, '29')"><div class="bus-number">21</div><div class="bus-name">29</div></div><div class="bus-route-item" onclick="selectBusRoute(22, '30')"><div class="bus-number">22</div><div class="bus-name">30</div></div><div class="bus-route-item" onclick="selectBusRoute(23, '31')"><div class="bus-number">23</div><div class="bus-name">31</div></div><div class="bus-route-item" onclick="selectBusRoute(24, '32')"><div class="bus-number">24</div><div class="bus-name">32</div></div><div class="bus-route-item" onclick="selectBusRoute(25, '33')"><div class="bus-number">25</div><div class="bus-name">33</div></div><div class="bus-route-item" onclick="selectBusRoute(26, '35')"><div class="bus-number">26</div><div class="bus-name">35</div></div><div class="bus-route-item" onclick="selectBusRoute(27, '36')"><div class="bus-number">27</div><div class="bus-name">36</div></div><div class="bus-route-item" onclick="selectBusRoute(28, '37')"><div class="bus-number">28</div><div class="bus-name">37</div></div><div class="bus-route-item" onclick="selectBusRoute(29, '38')"><div class="bus-number">29</div><div class="bus-name">38</div></div><div class="bus-route-item" onclick="selectBusRoute(30, '39')"><div class="bus-number">30</div><div class="bus-name">39</div></div><div class="bus-route-item" onclick="selectBusRoute(31, '40')"><div class="bus-number">31</div><div class="bus-name">40</div></div><div class="bus-route-item" onclick="selectBusRoute(32, '41')"><div class="bus-number">32</div><div class="bus-name">41</div></div><div class="bus-route-item" onclick="selectBusRoute(33, '42')"><div class="bus-number">33</div><div class="bus-name">42</div></div><div class="bus-route-item" onclick="selectBusRoute(34, '44')"><div class="bus-number">34</div><div class="bus-name">44</div></div><div class="bus-route-item" onclick="selectBusRoute(35, '45')"><div class="bus-number">35</div><div class="bus-name">45</div></div><div class="bus-route-item" onclick="selectBusRoute(36, '46')"><div class="bus-number">36</div><div class="bus-name">46</div></div><div class="bus-route-item" onclick="selectBusRoute(37, '49')"><div class="bus-number">37</div><div class="bus-name">49</div></div><div class="bus-route-item" onclick="selectBusRoute(38, '50')"><div class="bus-number">38</div><div class="bus-name">50</div></div><div class="bus-route-item" onclick="selectBusRoute(39, '51')"><div class="bus-number">39</div><div class="bus-name">51</div></div><div class="bus-route-item" onclick="selectBusRoute(40, '52')"><div class="bus-number">40</div><div class="bus-name">52</div></div><div class="bus-route-item" onclick="selectBusRoute(41, '53')"><div class="bus-number">41</div><div class="bus-name">53</div></div><div class="bus-route-item" onclick="selectBusRoute(42, '54')"><div class="bus-number">42</div><div class="bus-name">54</div></div><div class="bus-route-item" onclick="selectBusRoute(43, '55')"><div class="bus-number">43</div><div class="bus-name">55</div></div><div class="bus-route-item" onclick="selectBusRoute(44, '56')"><div class="bus-number">44</div><div class="bus-name">56</div></div><div class="bus-route-item" onclick="selectBusRoute(45, '57')"><div class="bus-number">45</div><div class="bus-name">57</div></div><div class="bus-route-item" onclick="selectBusRoute(46, '60')"><div class="bus-number">46</div><div class="bus-name">60</div></div><div class="bus-route-item" onclick="selectBusRoute(47, '61')"><div class="bus-number">47</div><div class="bus-name">61</div></div><div class="bus-route-item" onclick="selectBusRoute(48, '62')"><div class="bus-number">48</div><div class="bus-name">62</div></div><div class="bus-route-item" onclick="selectBusRoute(49, '64')"><div class="bus-number">49</div><div class="bus-name">64</div></div><div class="bus-route-item" onclick="selectBusRoute(50, '65')"><div class="bus-number">50</div><div class="bus-name">65</div></div><div class="bus-route-item" onclick="selectBusRoute(51, '66')"><div class="bus-number">51</div><div class="bus-name">66</div></div><div class="bus-route-item" onclick="selectBusRoute(52, '67')"><div class="bus-number">52</div><div class="bus-name">67</div></div><div class="bus-route-item" onclick="selectBusRoute(53, '70')"><div class="bus-number">53</div><div class="bus-name">70</div></div><div class="bus-route-item" onclick="selectBusRoute(54, '71')"><div class="bus-number">54</div><div class="bus-name">71</div></div><div class="bus-route-item" onclick="selectBusRoute(55, '72')"><div class="bus-number">55</div><div class="bus-name">72</div></div><div class="bus-route-item" onclick="selectBusRoute(56, '76')"><div class="bus-number">56</div><div class="bus-name">76</div></div><div class="bus-route-item" onclick="selectBusRoute(57, '77')"><div class="bus-number">57</div><div class="bus-name">77</div></div><div class="bus-route-item" onclick="selectBusRoute(58, '78')"><div class="bus-number">58</div><div class="bus-name">78</div></div><div class="bus-route-item" onclick="selectBusRoute(59, '79')"><div class="bus-number">59</div><div class="bus-name">79</div></div><div class="bus-route-item" onclick="selectBusRoute(60, '81')"><div class="bus-number">60</div><div class="bus-name">81</div></div><div class="bus-route-item" onclick="selectBusRoute(61, '83')"><div class="bus-number">61</div><div class="bus-name">83</div></div><div class="bus-route-item" onclick="selectBusRoute(62, '85')"><div class="bus-number">62</div><div class="bus-name">85</div></div><div class="bus-route-item" onclick="selectBusRoute(63, '88')"><div class="bus-number">63</div><div class="bus-name">88</div></div><div class="bus-route-item" onclick="selectBusRoute(64, '91')"><div class="bus-number">64</div><div class="bus-name">91</div></div><div class="bus-route-item" onclick="selectBusRoute(65, '92')"><div class="bus-number">65</div><div class="bus-name">92</div></div><div class="bus-route-item" onclick="selectBusRoute(66, '93')"><div class="bus-number">66</div><div class="bus-name">93</div></div><div class="bus-route-item" onclick="selectBusRoute(67, '96')"><div class="bus-number">67</div><div class="bus-name">96</div></div><div class="bus-route-item" onclick="selectBusRoute(68, '100')"><div class="bus-number">68</div><div class="bus-name">100</div></div><div class="bus-route-item" onclick="selectBusRoute(69, '101')"><div class="bus-number">69</div><div class="bus-name">101</div></div><div class="bus-route-item" onclick="selectBusRoute(70, '102')"><div class="bus-number">70</div><div class="bus-name">102</div></div><div class="bus-route-item" onclick="selectBusRoute(71, '103')"><div class="bus-number">71</div><div class="bus-name">103</div></div><div class="bus-route-item" onclick="selectBusRoute(72, '104')"><div class="bus-number">72</div><div class="bus-name">104</div></div><div class="bus-route-item" onclick="selectBusRoute(73, '105')"><div class="bus-number">73</div><div class="bus-name">105</div></div><div class="bus-route-item" onclick="selectBusRoute(74, '106')"><div class="bus-number">74</div><div class="bus-name">106</div></div><div class="bus-route-item" onclick="selectBusRoute(75, '107')"><div class="bus-number">75</div><div class="bus-name">107</div></div><div class="bus-route-item" onclick="selectBusRoute(76, '110')"><div class="bus-number">76</div><div class="bus-name">110</div></div><div class="bus-route-item" onclick="selectBusRoute(77, '111')"><div class="bus-number">77</div><div class="bus-name">111</div></div><div class="bus-route-item" onclick="selectBusRoute(78, '112')"><div class="bus-number">78</div><div class="bus-name">112</div></div><div class="bus-route-item" onclick="selectBusRoute(79, '113')"><div class="bus-number">79</div><div class="bus-name">113</div></div><div class="bus-route-item" onclick="selectBusRoute(80, '119')"><div class="bus-number">80</div><div class="bus-name">119</div></div><div class="bus-route-item" onclick="selectBusRoute(81, '120')"><div class="bus-number">81</div><div class="bus-name">120</div></div><div class="bus-route-item" onclick="selectBusRoute(82, '123')"><div class="bus-number">82</div><div class="bus-name">123</div></div><div class="bus-route-item" onclick="selectBusRoute(83, '125')"><div class="bus-number">83</div><div class="bus-name">125</div></div><div class="bus-route-item" onclick="selectBusRoute(84, '126')"><div class="bus-number">84</div><div class="bus-name">126</div></div><div class="bus-route-item" onclick="selectBusRoute(85, '130')"><div class="bus-number">85</div><div class="bus-name">130</div></div><div class="bus-route-item" onclick="selectBusRoute(86, '131')"><div class="bus-number">86</div><div class="bus-name">131</div></div><div class="bus-route-item" onclick="selectBusRoute(87, '132')"><div class="bus-number">87</div><div class="bus-name">132</div></div><div class="bus-route-item" onclick="selectBusRoute(88, '133')"><div class="bus-number">88</div><div class="bus-name">133</div></div><div class="bus-route-item" onclick="selectBusRoute(89, '135')"><div class="bus-number">89</div><div class="bus-name">135</div></div><div class="bus-route-item" onclick="selectBusRoute(90, '137')"><div class="bus-number">90</div><div class="bus-name">137</div></div><div class="bus-route-item" onclick="selectBusRoute(91, '139')"><div class="bus-number">91</div><div class="bus-name">139</div></div><div class="bus-route-item" onclick="selectBusRoute(92, '140')"><div class="bus-number">92</div><div class="bus-name">140</div></div><div class="bus-route-item" onclick="selectBusRoute(93, '141')"><div class="bus-number">93</div><div class="bus-name">141</div></div><div class="bus-route-item" onclick="selectBusRoute(94, '142')"><div class="bus-number">94</div><div class="bus-name">142</div></div><div class="bus-route-item" onclick="selectBusRoute(95, '143')"><div class="bus-number">95</div><div class="bus-name">143</div></div><div class="bus-route-item" onclick="selectBusRoute(96, '144')"><div class="bus-number">96</div><div class="bus-name">144</div></div><div class="bus-route-item" onclick="selectBusRoute(97, '145')"><div class="bus-number">97</div><div class="bus-name">145</div></div><div class="bus-route-item" onclick="selectBusRoute(98, '146')"><div class="bus-number">98</div><div class="bus-name">146</div></div><div class="bus-route-item" onclick="selectBusRoute(99, '147')"><div class="bus-number">99</div><div class="bus-name">147</div></div><div class="bus-route-item" onclick="selectBusRoute(100, '148')"><div class="bus-number">100</div><div class="bus-name">148</div></div><div class="bus-route-item" onclick="selectBusRoute(101, '149')"><div class="bus-number">101</div><div class="bus-name">149</div></div><div class="bus-route-item" onclick="selectBusRoute(102, '150')"><div class="bus-number">102</div><div class="bus-name">150</div></div><div class="bus-route-item" onclick="selectBusRoute(103, '155')"><div class="bus-number">103</div><div class="bus-name">155</div></div><div class="bus-route-item" onclick="selectBusRoute(104, '157')"><div class="bus-number">104</div><div class="bus-name">157</div></div><div class="bus-route-item" onclick="selectBusRoute(105, '158')"><div class="bus-number">105</div><div class="bus-name">158</div></div><div class="bus-route-item" onclick="selectBusRoute(106, '159')"><div class="bus-number">106</div><div class="bus-name">159</div></div><div class="bus-route-item" onclick="selectBusRoute(107, '160')"><div class="bus-number">107</div><div class="bus-name">160</div></div><div class="bus-route-item" onclick="selectBusRoute(108, '161')"><div class="bus-number">108</div><div class="bus-name">161</div></div><div class="bus-route-item" onclick="selectBusRoute(109, '162')"><div class="bus-number">109</div><div class="bus-name">162</div></div><div class="bus-route-item" onclick="selectBusRoute(110, '163')"><div class="bus-number">110</div><div class="bus-name">163</div></div><div class="bus-route-item" onclick="selectBusRoute(111, '164')"><div class="bus-number">111</div><div class="bus-name">164</div></div><div class="bus-route-item" onclick="selectBusRoute(112, '165')"><div class="bus-number">112</div><div class="bus-name">165</div></div><div class="bus-route-item" onclick="selectBusRoute(113, '166')"><div class="bus-number">113</div><div class="bus-name">166</div></div><div class="bus-route-item" onclick="selectBusRoute(114, '168')"><div class="bus-number">114</div><div class="bus-name">168</div></div><div class="bus-route-item" onclick="selectBusRoute(115, '169')"><div class="bus-number">115</div><div class="bus-name">169</div></div><div class="bus-route-item" onclick="selectBusRoute(116, '170')"><div class="bus-number">116</div><div class="bus-name">170</div></div><div class="bus-route-item" onclick="selectBusRoute(117, '172')"><div class="bus-number">117</div><div class="bus-name">172</div></div><div class="bus-route-item" onclick="selectBusRoute(118, '174')"><div class="bus-number">118</div><div class="bus-name">174</div></div><div class="bus-route-item" onclick="selectBusRoute(119, '176')"><div class="bus-number">119</div><div class="bus-name">176</div></div><div class="bus-route-item" onclick="selectBusRoute(120, '177')"><div class="bus-number">120</div><div class="bus-name">177</div></div><div class="bus-route-item" onclick="selectBusRoute(121, '179')"><div class="bus-number">121</div><div class="bus-name">179</div></div><div class="bus-route-item" onclick="selectBusRoute(122, '180')"><div class="bus-number">122</div><div class="bus-name">180</div></div><div class="bus-route-item" onclick="selectBusRoute(123, '182')"><div class="bus-number">123</div><div class="bus-name">182</div></div><div class="bus-route-item" onclick="selectBusRoute(124, '183')"><div class="bus-number">124</div><div class="bus-name">183</div></div><div class="bus-route-item" onclick="selectBusRoute(125, '184')"><div class="bus-number">125</div><div class="bus-name">184</div></div><div class="bus-route-item" onclick="selectBusRoute(126, '185')"><div class="bus-number">126</div><div class="bus-name">185</div></div><div class="bus-route-item" onclick="selectBusRoute(127, '186')"><div class="bus-number">127</div><div class="bus-name">186</div></div><div class="bus-route-item" onclick="selectBusRoute(128, '189')"><div class="bus-number">128</div><div class="bus-name">189</div></div><div class="bus-route-item" onclick="selectBusRoute(129, '190')"><div class="bus-number">129</div><div class="bus-name">190</div></div><div class="bus-route-item" onclick="selectBusRoute(130, '191')"><div class="bus-number">130</div><div class="bus-name">191</div></div><div class="bus-route-item" onclick="selectBusRoute(131, '193')"><div class="bus-number">131</div><div class="bus-name">193</div></div><div class="bus-route-item" onclick="selectBusRoute(132, '194')"><div class="bus-number">132</div><div class="bus-name">194</div></div><div class="bus-route-item" onclick="selectBusRoute(133, '195')"><div class="bus-number">133</div><div class="bus-name">195</div></div><div class="bus-route-item" onclick="selectBusRoute(134, '197')"><div class="bus-number">134</div><div class="bus-name">197</div></div><div class="bus-route-item" onclick="selectBusRoute(135, '198')"><div class="bus-number">135</div><div class="bus-name">198</div></div><div class="bus-route-item" onclick="selectBusRoute(136, '199')"><div class="bus-number">136</div><div class="bus-name">199</div></div><div class="bus-route-item" onclick="selectBusRoute(137, '200')"><div class="bus-number">137</div><div class="bus-name">200</div></div><div class="bus-route-item" onclick="selectBusRoute(138, '202')"><div class="bus-number">138</div><div class="bus-name">202</div></div><div class="bus-route-item" onclick="selectBusRoute(139, '203')"><div class="bus-number">139</div><div class="bus-name">203</div></div><div class="bus-route-item" onclick="selectBusRoute(140, '204')"><div class="bus-number">140</div><div class="bus-name">204</div></div><div class="bus-route-item" onclick="selectBusRoute(141, '205')"><div class="bus-number">141</div><div class="bus-name">205</div></div><div class="bus-route-item" onclick="selectBusRoute(142, '206')"><div class="bus-number">142</div><div class="bus-name">206</div></div><div class="bus-route-item" onclick="selectBusRoute(143, '208')"><div class="bus-number">143</div><div class="bus-name">208</div></div><div class="bus-route-item" onclick="selectBusRoute(144, '209')"><div class="bus-number">144</div><div class="bus-name">209</div></div><div class="bus-route-item" onclick="selectBusRoute(145, '210')"><div class="bus-number">145</div><div class="bus-name">210</div></div><div class="bus-route-item" onclick="selectBusRoute(146, '211')"><div class="bus-number">146</div><div class="bus-name">211</div></div><div class="bus-route-item" onclick="selectBusRoute(147, '212')"><div class="bus-number">147</div><div class="bus-name">212</div></div><div class="bus-route-item" onclick="selectBusRoute(148, '213')"><div class="bus-number">148</div><div class="bus-name">213</div></div><div class="bus-route-item" onclick="selectBusRoute(149, '214')"><div class="bus-number">149</div><div class="bus-name">214</div></div><div class="bus-route-item" onclick="selectBusRoute(150, '215')"><div class="bus-number">150</div><div class="bus-name">215</div></div><div class="bus-route-item" onclick="selectBusRoute(151, '216')"><div class="bus-number">151</div><div class="bus-name">216</div></div><div class="bus-route-item" onclick="selectBusRoute(152, '217')"><div class="bus-number">152</div><div class="bus-name">217</div></div><div class="bus-route-item" onclick="selectBusRoute(153, '446')"><div class="bus-number">153</div><div class="bus-name">446</div></div><div class="bus-route-item" onclick="selectBusRoute(154, '108A')"><div class="bus-number">154</div><div class="bus-name">108A</div></div><div class="bus-route-item" onclick="selectBusRoute(155, '108B')"><div class="bus-number">155</div><div class="bus-name">108B</div></div><div class="bus-route-item" onclick="selectBusRoute(156, '114A')"><div class="bus-number">156</div><div class="bus-name">114A</div></div><div class="bus-route-item" onclick="selectBusRoute(157, '114B')"><div class="bus-number">157</div><div class="bus-name">114B</div></div><div class="bus-route-item" onclick="selectBusRoute(158, '118A')"><div class="bus-number">158</div><div class="bus-name">118A</div></div><div class="bus-route-item" onclick="selectBusRoute(159, '118B')"><div class="bus-number">159</div><div class="bus-name">118B</div></div><div class="bus-route-item" onclick="selectBusRoute(160, '120A')"><div class="bus-number">160</div><div class="bus-name">120A</div></div><div class="bus-route-item" onclick="selectBusRoute(161, '120E')"><div class="bus-number">161</div><div class="bus-name">120E</div></div><div class="bus-route-item" onclick="selectBusRoute(162, '121E')"><div class="bus-number">162</div><div class="bus-name">121E</div></div><div class="bus-route-item" onclick="selectBusRoute(163, '140A')"><div class="bus-number">163</div><div class="bus-name">140A</div></div><div class="bus-route-item" onclick="selectBusRoute(164, '140E')"><div class="bus-number">164</div><div class="bus-name">140E</div></div><div class="bus-route-item" onclick="selectBusRoute(165, '141E')"><div class="bus-number">165</div><div class="bus-name">141E</div></div><div class="bus-route-item" onclick="selectBusRoute(166, '150A')"><div class="bus-number">166</div><div class="bus-name">150A</div></div><div class="bus-route-item" onclick="selectBusRoute(167, '160A')"><div class="bus-number">167</div><div class="bus-name">160A</div></div><div class="bus-route-item" onclick="selectBusRoute(168, '173A')"><div class="bus-number">168</div><div class="bus-name">173A</div></div><div class="bus-route-item" onclick="selectBusRoute(169, '173B')"><div class="bus-number">169</div><div class="bus-name">173B</div></div><div class="bus-route-item" onclick="selectBusRoute(170, '7A')"><div class="bus-number">170</div><div class="bus-name">7A</div></div><div class="bus-route-item" onclick="selectBusRoute(171, '7B')"><div class="bus-number">171</div><div class="bus-name">7B</div></div><div class="bus-route-item" onclick="selectBusRoute(172, '88A')"><div class="bus-number">172</div><div class="bus-name">88A</div></div><div class="bus-route-item" onclick="selectBusRoute(173, 'E1')"><div class="bus-number">173</div><div class="bus-name">E1</div></div><div class="bus-route-item" onclick="selectBusRoute(174, 'H1')"><div class="bus-number">174</div><div class="bus-name">H1</div></div><div class="bus-route-item" onclick="selectBusRoute(175, 'M8')"><div class="bus-number">175</div><div class="bus-name">M8</div></div><div class="bus-route-item" onclick="selectBusRoute(176, '508')"><div class="bus-number">176</div><div class="bus-name">508</div></div><div class="bus-route-item" onclick="selectBusRoute(177, '567')"><div class="bus-number">177</div><div class="bus-name">567</div></div><div class="bus-route-item" onclick="selectBusRoute(178, '592')"><div class="bus-number">178</div><div class="bus-name">592</div></div><div class="bus-route-item" onclick="selectBusRoute(179, '594')"><div class="bus-number">179</div><div class="bus-name">594</div></div><div class="bus-route-item" onclick="selectBusRoute(180, '595')"><div class="bus-number">180</div><div class="bus-name">595</div></div><div class="bus-route-item" onclick="selectBusRoute(181, '150E')"><div class="bus-number">181</div><div class="bus-name">150E</div></div><div class="bus-route-item" onclick="selectBusRoute(182, '502')"><div class="bus-number">182</div><div class="bus-name">502</div></div><div class="bus-route-item" onclick="selectBusRoute(183, '503')"><div class="bus-number">183</div><div class="bus-name">503</div></div><div class="bus-route-item" onclick="selectBusRoute(184, '505')"><div class="bus-number">184</div><div class="bus-name">505</div></div><div class="bus-route-item" onclick="selectBusRoute(185, '506')"><div class="bus-number">185</div><div class="bus-name">506</div></div><div class="bus-route-item" onclick="selectBusRoute(186, '509')"><div class="bus-number">186</div><div class="bus-name">509</div></div><div class="bus-route-item" onclick="selectBusRoute(187, '511')"><div class="bus-number">187</div><div class="bus-name">511</div></div><div class="bus-route-item" onclick="selectBusRoute(188, '515')"><div class="bus-number">188</div><div class="bus-name">515</div></div><div class="bus-route-item" onclick="selectBusRoute(189, '517')"><div class="bus-number">189</div><div class="bus-name">517</div></div><div class="bus-route-item" onclick="selectBusRoute(190, '519')"><div class="bus-number">190</div><div class="bus-name">519</div></div><div class="bus-route-item" onclick="selectBusRoute(191, '521')"><div class="bus-number">191</div><div class="bus-name">521</div></div><div class="bus-route-item" onclick="selectBusRoute(192, '522')"><div class="bus-number">192</div><div class="bus-name">522</div></div><div class="bus-route-item" onclick="selectBusRoute(193, '523')"><div class="bus-number">193</div><div class="bus-name">523</div></div><div class="bus-route-item" onclick="selectBusRoute(194, '525')"><div class="bus-number">194</div><div class="bus-name">525</div></div><div class="bus-route-item" onclick="selectBusRoute(195, '531')"><div class="bus-number">195</div><div class="bus-name">531</div></div><div class="bus-route-item" onclick="selectBusRoute(196, '533')"><div class="bus-number">196</div><div class="bus-name">533</div></div><div class="bus-route-item" onclick="selectBusRoute(197, '535')"><div class="bus-number">197</div><div class="bus-name">535</div></div><div class="bus-route-item" onclick="selectBusRoute(198, '536')"><div class="bus-number">198</div><div class="bus-name">536</div></div><div class="bus-route-item" onclick="selectBusRoute(199, '537')"><div class="bus-number">199</div><div class="bus-name">537</div></div><div class="bus-route-item" onclick="selectBusRoute(200, '539')"><div class="bus-number">200</div><div class="bus-name">539</div></div><div class="bus-route-item" onclick="selectBusRoute(201, '550')"><div class="bus-number">201</div><div class="bus-name">550</div></div><div class="bus-route-item" onclick="selectBusRoute(202, '551')"><div class="bus-number">202</div><div class="bus-name">551</div></div><div class="bus-route-item" onclick="selectBusRoute(203, '553')"><div class="bus-number">203</div><div class="bus-name">553</div></div><div class="bus-route-item" onclick="selectBusRoute(204, '554')"><div class="bus-number">204</div><div class="bus-name">554</div></div><div class="bus-route-item" onclick="selectBusRoute(205, '555')"><div class="bus-number">205</div><div class="bus-name">555</div></div><div class="bus-route-item" onclick="selectBusRoute(206, '556')"><div class="bus-number">206</div><div class="bus-name">556</div></div><div class="bus-route-item" onclick="selectBusRoute(207, '557')"><div class="bus-number">207</div><div class="bus-name">557</div></div><div class="bus-route-item" onclick="selectBusRoute(208, '569')"><div class="bus-number">208</div><div class="bus-name">569</div></div><div class="bus-route-item" onclick="selectBusRoute(209, '596')"><div class="bus-number">209</div><div class="bus-name">596</div></div>
                </div>
            </div>
        </div>

        <div id="map"></div>
        <div id="selectedBusInfo">
            <h4 id="busInfoName"></h4>
            <p id="busInfoStops"></p>
            <button onclick="clearBusSelection()">Clear Selection</button>
        </div>
    </div>

    <script>
        var map = L.map('map').setView([40.4093, 49.8671], 11);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap',
            maxZoom: 19
        }).addTo(map);

        // Data
        var pois = [{"title": "AAAF Park Ya≈üayƒ±≈ü Kompleksi", "lat": 40.45948689837196, "lon": 49.721031188964844, "type": "poi"}, {"title": "Baku Engineering University", "lat": 40.47620304302562, "lon": 49.726524353027344, "type": "poi"}, {"title": "Bank Respublika Arena", "lat": 40.48638740343161, "lon": 49.76600646972656, "type": "poi"}, {"title": "Bank Respublika Arena", "lat": 40.48638740343161, "lon": 49.76600646972656, "type": "poi"}, {"title": "Mud Volcano", "lat": 40.4654947417899, "lon": 49.79072570800781, "type": "poi"}, {"title": "Binagadi Settlement", "lat": 40.46340511806722, "lon": 49.8284912109375, "type": "poi"}, {"title": "Nurlu Ya≈üayƒ±≈ü Massivi", "lat": 40.449820979343116, "lon": 49.790382385253906, "type": "poi"}, {"title": "Sabun√ßu X…ôst…ôxanasƒ±", "lat": 40.44250530554684, "lon": 49.94213104248047, "type": "poi"}, {"title": "Balakhani", "lat": 40.46053177930345, "lon": 49.92256164550781, "type": "poi"}, {"title": "Binagadi Settlement", "lat": 40.46340511806722, "lon": 49.8284912109375, "type": "poi"}, {"title": "H√∂km…ôli", "lat": 40.42970096044579, "lon": 49.73064422607422, "type": "poi"}, {"title": "Heyd…ôr M…ôscidi", "lat": 40.42891694173494, "lon": 49.82402801513672, "type": "poi"}, {"title": "Milli Onkologiya M…ôrk…ôzi", "lat": 40.400947631519614, "lon": 49.804115295410156, "type": "poi"}, {"title": "Bil…ôc…ôri", "lat": 40.438585867043294, "lon": 49.80480194091797, "type": "poi"}, {"title": "Sulut…ôp…ô", "lat": 40.42996229798497, "lon": 49.77252960205078, "type": "poi"}, {"title": "9-cu Mikrorayon", "lat": 40.424996711082514, "lon": 49.81407165527344, "type": "poi"}, {"title": "Xoc…ôs…ôn", "lat": 40.40957492033849, "lon": 49.764976501464844, "type": "poi"}, {"title": "Bakƒ± bulvarƒ±", "lat": 40.368781631996, "lon": 49.84325408935547, "type": "poi"}, {"title": "Daƒü√ºst√º park", "lat": 40.3577946021453, "lon": 49.8284912109375, "type": "poi"}, {"title": "Crescent Mall", "lat": 40.37427447537182, "lon": 49.860076904296875, "type": "poi"}, {"title": "\"SURAXANI\" G∆èMƒ∞-MUZEYƒ∞", "lat": 40.33764706330718, "lon": 49.841880798339844, "type": "poi"}, {"title": "Badamdar", "lat": 40.33215123550074, "lon": 49.80377197265625, "type": "poi"}, {"title": "≈ûƒ±x", "lat": 40.31435215036358, "lon": 49.80171203613281, "type": "poi"}, {"title": "Congress Hall Of Baku Higher Oil School", "lat": 40.319325896602095, "lon": 49.82746124267578, "type": "poi"}, {"title": "≈ûubanƒ±", "lat": 40.36799690353755, "lon": 49.76600646972656, "type": "poi"}, {"title": "Heyd…ôr ∆èliyev M…ôrk…ôzi", "lat": 40.39597990301881, "lon": 49.86763000488281, "type": "poi"}, {"title": "Crescent Mall", "lat": 40.37427447537182, "lon": 49.860076904296875, "type": "poi"}, {"title": "Yeni klinika", "lat": 40.41218903196705, "lon": 49.89887237548828, "type": "poi"}, {"title": "Milli Onkologiya M…ôrk…ôzi", "lat": 40.400947631519614, "lon": 49.804115295410156, "type": "poi"}, {"title": "Sabun√ßu X…ôst…ôxanasƒ±", "lat": 40.44250530554684, "lon": 49.94213104248047, "type": "poi"}, {"title": "Nizami Tibb M…ôrk…ôzi", "lat": 40.39493401873282, "lon": 49.91844177246094, "type": "poi"}, {"title": "Baku Olimpiya Stadionu", "lat": 40.42996229798497, "lon": 49.919471740722656, "type": "poi"}, {"title": "Bakƒ± Aƒü ≈û…ôh…ôr", "lat": 40.38212061782238, "lon": 49.88822937011719, "type": "poi"}, {"title": "H…ôzi Aslanov", "lat": 40.382382140167465, "lon": 49.924278259277344, "type": "poi"}, {"title": "D…ôrn…ôg√ºl", "lat": 40.42055350678709, "lon": 49.850120544433594, "type": "poi"}, {"title": "NZS", "lat": 40.38656635960944, "lon": 49.913978576660156, "type": "poi"}, {"title": "Bakƒ± bulvarƒ±", "lat": 40.368781631996, "lon": 49.84325408935547, "type": "poi"}, {"title": "Daƒü√ºst√º park", "lat": 40.3577946021453, "lon": 49.8284912109375, "type": "poi"}, {"title": "Crescent Mall", "lat": 40.37427447537182, "lon": 49.860076904296875, "type": "poi"}, {"title": "\"SURAXANI\" G∆èMƒ∞-MUZEYƒ∞", "lat": 40.33764706330718, "lon": 49.841880798339844, "type": "poi"}, {"title": "G…ônclik Park", "lat": 40.361195540838985, "lon": 49.947967529296875, "type": "poi"}, {"title": "Sabun√ßu X…ôst…ôxanasƒ±", "lat": 40.44250530554684, "lon": 49.94213104248047, "type": "poi"}, {"title": "Appro Hospital", "lat": 40.44694705960049, "lon": 50.011138916015625, "type": "poi"}, {"title": "Ramana qalasƒ±", "lat": 40.4563521580686, "lon": 49.979896545410156, "type": "poi"}, {"title": "Balakhani", "lat": 40.46053177930345, "lon": 49.92256164550781, "type": "poi"}, {"title": "Zabrat Hava Limanƒ±", "lat": 40.496831296202615, "lon": 49.97028350830078, "type": "poi"}, {"title": "Ramana Ya≈üayƒ±≈ü kompleksi Grandmart supermarket", "lat": 40.48116484751597, "lon": 49.99500274658203, "type": "poi"}, {"title": "Heyd…ôr ∆èliyev Adƒ±na Beyn…ôlxalq Hava Limanƒ±", "lat": 40.465755940184344, "lon": 50.05199432373047, "type": "poi"}, {"title": "Appro Hospital", "lat": 40.44694705960049, "lon": 50.011138916015625, "type": "poi"}, {"title": "Agilli Bala- montoseri merkezi", "lat": 40.47254674190491, "lon": 50.074310302734375, "type": "poi"}, {"title": "Bin…ô", "lat": 40.457919546503106, "lon": 50.100746154785156, "type": "poi"}, {"title": "Ramana Ya≈üayƒ±≈ü kompleksi Grandmart supermarket", "lat": 40.48116484751597, "lon": 49.99500274658203, "type": "poi"}, {"title": "Baku Medical Plaza", "lat": 40.39493401873282, "lon": 49.964447021484375, "type": "poi"}, {"title": "Sabun√ßu X…ôst…ôxanasƒ±", "lat": 40.44250530554684, "lon": 49.94213104248047, "type": "poi"}, {"title": "Nizami Tibb M…ôrk…ôzi", "lat": 40.39493401873282, "lon": 49.91844177246094, "type": "poi"}, {"title": "M”ôlh”ôm Beyn…ôlxalq Hospital", "lat": 40.40774498177989, "lon": 49.954490661621094, "type": "poi"}, {"title": "Baku Olimpiya Stadionu", "lat": 40.42996229798497, "lon": 49.919471740722656, "type": "poi"}, {"title": "Bakƒ±xanov", "lat": 40.424996711082514, "lon": 49.95002746582031, "type": "poi"}, {"title": "Appro Hospital", "lat": 40.44694705960049, "lon": 50.011138916015625, "type": "poi"}, {"title": "∆èhm…ôdli", "lat": 40.38212061782238, "lon": 49.950714111328125, "type": "poi"}, {"title": "H…ôzi Aslanov", "lat": 40.382382140167465, "lon": 49.924278259277344, "type": "poi"}, {"title": "Yeni G√ºn…ô≈üli", "lat": 40.38578183826234, "lon": 49.980926513671875, "type": "poi"}, {"title": "∆èmircan", "lat": 40.42682618048867, "lon": 49.98710632324219, "type": "poi"}, {"title": "≈û…ôrq Massivi", "lat": 40.39937891475058, "lon": 49.989166259765625, "type": "poi"}, {"title": "6th Madan", "lat": 40.42081487986972, "lon": 50.01251220703125, "type": "poi"}, {"title": "G…ônclik Park", "lat": 40.361195540838985, "lon": 49.947967529296875, "type": "poi"}, {"title": "Zƒ±ƒü", "lat": 40.3454974693924, "lon": 49.97783660888672, "type": "poi"}, {"title": "Appro Hospital", "lat": 40.44694705960049, "lon": 50.011138916015625, "type": "poi"}, {"title": "Dreamland Golf Club", "lat": 40.40434639245168, "lon": 50.094566345214844, "type": "poi"}, {"title": "Yeni Suraxanƒ±", "lat": 40.43048497001667, "lon": 50.03448486328125, "type": "poi"}, {"title": "Aviamodell…ôrin u√ßu≈ü meydan√ßasƒ±", "lat": 40.392319236943315, "lon": 50.135765075683594, "type": "poi"}, {"title": "6th Madan", "lat": 40.42081487986972, "lon": 50.01251220703125, "type": "poi"}, {"title": "H√∂vsan Mall", "lat": 40.36041072406, "lon": 50.07568359375, "type": "poi"}];
        var allStops = [];

        var poiMarkers = [];
        var stopMarkers = [];
        var currentBusStops = [];
        var selectedBusId = null;

        console.log('Total POIs:', pois.length);
        console.log('Total Stops:', allStops.length);

        // Add POI markers
        pois.forEach(function(loc) {
            var marker = L.marker([loc.lat, loc.lon], {
                icon: L.icon({
                    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
                    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',
                    iconSize: [25, 41],
                    iconAnchor: [12, 41],
                    popupAnchor: [1, -34],
                    shadowSize: [41, 41]
                })
            }).addTo(map);

            marker.bindPopup('<strong>üìç ' + loc.title + '</strong>');
            poiMarkers.push(marker);
        });

        // Layer toggles
        document.getElementById('togglePOI').addEventListener('change', function(e) {
            poiMarkers.forEach(m => e.target.checked ? map.addLayer(m) : map.removeLayer(m));
        });

        document.getElementById('toggleStops').addEventListener('change', function(e) {
            stopMarkers.forEach(m => e.target.checked ? map.addLayer(m) : map.removeLayer(m));
        });

        // Select bus route
        function selectBusRoute(busId, busName) {
            console.log('Selected bus:', busId, busName);

            // Clear previous selection
            currentBusStops.forEach(m => map.removeLayer(m));
            currentBusStops = [];

            // Update UI
            document.querySelectorAll('.bus-route-item').forEach(item => item.classList.remove('selected'));
            event.target.closest('.bus-route-item').classList.add('selected');

            selectedBusId = busId;

            // Get stops for this bus
            var busStops = allStops.filter(s => s.bus_id == busId);

            console.log('Bus ' + busId + ' stops:', busStops.length);

            // Add markers for this bus's stops
            busStops.forEach(function(stop) {
                var marker = L.marker([stop.lat, stop.lon], {
                    icon: L.icon({
                        iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',
                        shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',
                        iconSize: [20, 33],
                        iconAnchor: [10, 33],
                        popupAnchor: [1, -28],
                        shadowSize: [33, 33]
                    })
                }).addTo(map);

                marker.bindPopup('<strong>üöè ' + stop.stop_name + '</strong><br><small>' + stop.bus_name + '</small>');
                currentBusStops.push(marker);
                stopMarkers.push(marker);
            });

            // Show info panel
            document.getElementById('busInfoName').textContent = busName;
            document.getElementById('busInfoStops').textContent = busStops.length + ' stops';
            document.getElementById('selectedBusInfo').classList.add('show');

            // Fit map to show all stops
            if (busStops.length > 0) {
                var bounds = L.latLngBounds(busStops.map(s => [s.lat, s.lon]));
                map.fitBounds(bounds, { padding: [50, 50] });
            } else {
                alert('No stops found for this bus route.');
            }
        }

        // Clear selection
        function clearBusSelection() {
            currentBusStops.forEach(m => map.removeLayer(m));
            stopMarkers = stopMarkers.filter(m => !currentBusStops.includes(m));
            currentBusStops = [];
            selectedBusId = null;
            document.querySelectorAll('.bus-route-item').forEach(item => item.classList.remove('selected'));
            document.getElementById('selectedBusInfo').classList.remove('show');
            map.setView([40.4093, 49.8671], 11);
        }

        // Search buses
        document.getElementById('searchBus').addEventListener('input', function(e) {
            var term = e.target.value.toLowerCase();
            document.querySelectorAll('.bus-route-item').forEach(function(item) {
                var name = item.textContent.toLowerCase();
                item.style.display = name.includes(term) ? 'flex' : 'none';
            });
        });
    </script>
</body>
</html>